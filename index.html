<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Hanani&#039;s blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hanani"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hanani"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="111"><meta property="og:url" content="http://blog.kalac.cn/"><meta property="og:site_name" content="Hanani&#039;s blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://blog.kalac.cn/img/og_image.png"><meta property="article:author" content="Hanani"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.kalac.cn"},"headline":"Hanani's blog","image":["http://blog.kalac.cn/img/og_image.png"],"author":{"@type":"Person","name":"Hanani"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.2"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/logo.png" alt="Hanani&#039;s blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-22T06:50:40.000Z" title="2022/6/22 下午2:50:40">2022-06-22</time>发表</span><span class="level-item"><time dateTime="2022-06-22T06:50:40.206Z" title="2022/6/22 下午2:50:40">2022-06-22</time>更新</span><span class="level-item">9 分钟读完 (大约1386个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/22/%E7%B2%BE%E5%A6%99%E7%9A%84%E4%BD%8D%E8%BF%90%E7%AE%97/">精妙的位运算</a></h1><div class="content"><h2 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h2><ul>
<li><p>与运算（and）</p>
<p><code>&amp;</code>表示，当两个相同位对应的数都是 1 的时候，该位获得的结果才是 1，否则为 0<br>例如说<code>6 &amp; 11</code>，转换为二进制就是<code>0110 &amp; 1011</code>，结果为<code>0010</code>。<br><strong>在位运算中常常与mask进行提取对应位值的操作。</strong></p>
</li>
<li><p>或运算（or）</p>
<p><code>|</code>表示，当两个相同位对应的数只要有一个数 1 的时候，该位获得的结果为 1，否则为 0<br>还是用 6 和 11 这两个数做例子，就是<code>0110 | 1011 = 1111</code>。<strong>在位运算中可以起到赋值的作用。</strong></p>
</li>
<li><p>非运算（not）</p>
<p><code>~</code>表示将每一位按位取反（原来是 0 结果就是 1，原来是 1 结果就是 0）。<code>~110 = 001</code><br>在对Int值进行非运算时，因为计算机中存储的是补码，此时的非运算对补码进行取反后，再还原为原码后就会变为奇怪的值。<br>  <a target="_blank" rel="noopener" href="https://bbs.csdn.net/wap/topics/100095663">为何~1等于-2，~0等于-1呢</a></p>
</li>
<li><p>异或运算（xor）</p>
<p><code>^</code>表示，当两个相同位对应的数字<strong>不同</strong>的时候为 1，否则为 0，可以用<code>A ^ B == 0</code>来判断两个数是否相等。例如说：<code>0110 ^ 1011 = 1101</code>。<strong>可以用于判断两值是否相同并且提取出改变的位</strong></p>
</li>
<li><p>左移（shl）</p>
<p><code>&lt;&lt;</code>表示，<code>a &lt;&lt; b</code>表示 a 左移 b 位，由于移位在末位多出来的未知数字补零。<br>在这里面可以等价为<code>a * 2^b</code>这个运算（针对十进制）。<code>0001 &lt;&lt; 1 = 0010</code> 相当于<code>1 * 2^1 = 2</code></p>
</li>
<li><p>右移（shr）</p>
<p><code>&gt;&gt;</code>表示，<code>a &gt;&gt; b</code>表示将 a 右移 b 位，原本的末位进行右移后会被舍弃，左边的用原有标志位补充，正数补0，负数补1。同样的，右移在十进制里面也可以近似为<code>a / (2^b)</code>的形式，不过要对结果取整，也不一定准确，只能够说意思大概如此。</p>
</li>
<li><p>无符号右移</p>
<p><code>&gt;&gt;&gt;</code>表示，不管正负标志位为 0 还是 1，将该数的二进制码整体右移，左边部分总是以 0 填充，右边部分舍弃。</p>
</li>
</ul>
<p><strong>运算优先级： <code>~</code> &gt; <code>&lt;&lt;</code> &#x3D; <code>&gt;&gt;</code>&#x3D; <code>&gt;&gt;&gt;</code> &gt; <code>&amp;</code> &gt; <code>^</code> &gt; <code>|</code> &gt; <code>&amp;&amp;</code> &gt; <code>||</code></strong></p></div><a class="article-more button is-small is-size-7" href="/2022/06/22/%E7%B2%BE%E5%A6%99%E7%9A%84%E4%BD%8D%E8%BF%90%E7%AE%97/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-15T10:04:56.000Z" title="2022/6/15 下午6:04:56">2022-06-15</time>发表</span><span class="level-item"><time dateTime="2022-06-20T09:59:21.757Z" title="2022/6/20 下午5:59:21">2022-06-20</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">16 分钟读完 (大约2469个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/15/Android%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/">Android屏幕适配知识总结</a></h1><div class="content"><h2 id="1-概念解释"><a href="#1-概念解释" class="headerlink" title="1. 概念解释"></a>1. 概念解释</h2><h3 id="屏幕尺寸"><a href="#屏幕尺寸" class="headerlink" title="屏幕尺寸"></a>屏幕尺寸</h3><p>手机对角线的物理尺寸，单位：英寸（inch），1英寸&#x3D;2.54cm</p>
<h3 id="屏幕分辨率"><a href="#屏幕分辨率" class="headerlink" title="屏幕分辨率"></a>屏幕分辨率</h3><p>手机在横向、纵向上的像素点数的总和，由横向像素数 * 纵向像素数表示（1280*720），每个像素都是1px</p>
<h4 id="屏幕PPI（屏幕像素密度）"><a href="#屏幕PPI（屏幕像素密度）" class="headerlink" title="屏幕PPI（屏幕像素密度）"></a>屏幕PPI（屏幕像素密度）</h4><p>表示每英寸像素数，则在相同尺寸下，PPI越高，则越清晰。在PPI相同的情况下，屏幕尺寸越大，越模糊。</p>
<p><img src="/images/PPI%E8%AE%A1%E7%AE%97%E8%A7%84%E5%88%99.webp" alt="PPI计算规则"></p>
<p>eg：小米8的像素密度为402PPI</p>
<h4 id="DPI"><a href="#DPI" class="headerlink" title="DPI"></a>DPI</h4><p>是印刷业使用的单位，其表示的是打印纸上每一英寸包含的墨点数量，<em>网络上的观点是Google误用了该单位</em>。在android中可以将PPI与DPI等价看待。</p>
<p>物理上DPI值是一个固定值，无法修改。但Android系统中的<code>densityDpi</code>参数可以通过root或adb命令修改。修改后会有一个<code>Physical density</code> 与<code>Override density</code>。</p>
<h3 id="Density"><a href="#Density" class="headerlink" title="Density"></a>Density</h3><ul>
<li><code>DisplayMetrics.density</code><br>  该density是为了方便px与dp的转换，额外提供了此参数，density &#x3D; densityDpi &#x2F; 160。</li>
<li><code>adb shell wm density</code><br>  这个density其实就是dpi的概念。</li>
</ul>
<p><em>很多文章中的density也就是指的是dpi</em>。</p>
<h3 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h3><p>密度无关像素(density-independent pixel)，与终端上的实际物理像素点无关。</p>
<p>在dpi &#x3D; 160的设备上，1dp&#x3D;1px。当dpi提升到240时，1dp所能表示的像素点提高，扩大到(240&#x2F;160)&#x3D;1.5倍，此时1dp&#x3D;1.5dp。</p>
<p>dp与px转换可以使用 <code>px = dp * (densityDpi / 160)</code>或者<code>px = dp * density</code>。</p>
<h3 id="SP"><a href="#SP" class="headerlink" title="SP"></a>SP</h3><p>可缩放像素，与dp基本相同，用于字体大小设置。唯一不同就是sp会随着系统设置的字体缩放进行缩放。</p></div><a class="article-more button is-small is-size-7" href="/2022/06/15/Android%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-01-12T07:15:24.000Z" title="2022/1/12 下午3:15:24">2022-01-12</time>发表</span><span class="level-item"><time dateTime="2022-01-12T08:57:00.231Z" title="2022/1/12 下午4:57:00">2022-01-12</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a><span> / </span><a class="link-muted" href="/categories/Android/Gradle/">Gradle</a></span><span class="level-item">14 分钟读完 (大约2112个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/01/12/gradle%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90(%E4%B8%80)/">Gradle构建流程分析（一）- 初始化与Task创建</a></h1><div class="content"><p><em>基于AGP3.4.2版本进行分析</em></p>
<h2 id="获取源码"><a href="#获取源码" class="headerlink" title="获取源码"></a>获取源码</h2><p>在build.gradle中添加<code>implementation &#39;com.android.tools.build:gradle:3.4.2&#39;</code>Sync后即可看到源码</p>
<h2 id="插件入口"><a href="#插件入口" class="headerlink" title="插件入口"></a>插件入口</h2><p>获取到源码后，看&#x2F;META-INF&#x2F;gradle-plugins&#x2F;com.android.application.properties文件内容为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation-class&#x3D;com.android.build.gradle.AppPlugin</span><br></pre></td></tr></table></figure>
<p>可以看出插件“com.android.application”对应为<strong>AppPlugin.java</strong>，在同级目录下的com.android.library.properties文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation-class&#x3D;com.android.build.gradle.LibraryPlugin</span><br></pre></td></tr></table></figure>
<p>可以看出插件“com.android.library”为<strong>LibraryPlugin.java</strong></p></div><a class="article-more button is-small is-size-7" href="/2022/01/12/gradle%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90(%E4%B8%80)/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-05-07T02:47:19.000Z" title="2021/5/7 上午10:47:19">2021-05-07</time>发表</span><span class="level-item"><time dateTime="2022-01-12T08:54:35.362Z" title="2022/1/12 下午4:54:35">2022-01-12</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a><span> / </span><a class="link-muted" href="/categories/Android/BUG%E6%80%BB%E7%BB%93/">BUG总结</a></span><span class="level-item">2 分钟读完 (大约326个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/05/07/%E8%AE%BE%E7%BD%AE%E5%B1%8F%E5%B9%95%E7%BC%A9%E6%94%BE%E5%90%8E%E7%BC%A9%E6%94%BE%E8%B7%9D%E7%A6%BB%E5%8F%98%E4%B8%BA%E5%8F%8C%E5%80%8D/">设置屏幕缩放后缩放距离变为双倍</a></h1><div class="content"><h2 id="复现步骤（问题）"><a href="#复现步骤（问题）" class="headerlink" title="复现步骤（问题）"></a>复现步骤（问题）</h2><ol>
<li>在Android6.0系统中设置屏幕缩放，向内缩小屏幕任意范围</li>
<li>在一定的条件下，如关闭一个dialog风格的activity、关闭popupwindow</li>
<li>会发现向内缩小的屏幕尺寸变大一倍</li>
</ol>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>通过Android Studio中的layout inspector分析发现：屏幕缩放的实现方式是在<code>DecorView</code>中设置padding进行屏幕变化，但出现问题后，一个id为<code>action_bar_root</code>的<code>FitWindowsLinearLayout</code>中也出现了<strong>相同数值</strong>的padding。找到相应的<code>abc_screen_simple.xml</code>后发现这个View上配置了<code>android:fitsSystemWindows=&quot;true&quot;</code></p></div><a class="article-more button is-small is-size-7" href="/2021/05/07/%E8%AE%BE%E7%BD%AE%E5%B1%8F%E5%B9%95%E7%BC%A9%E6%94%BE%E5%90%8E%E7%BC%A9%E6%94%BE%E8%B7%9D%E7%A6%BB%E5%8F%98%E4%B8%BA%E5%8F%8C%E5%80%8D/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-03-31T09:20:30.000Z" title="2021/3/31 下午5:20:30">2021-03-31</time>发表</span><span class="level-item"><time dateTime="2022-06-21T09:22:07.338Z" title="2022/6/21 下午5:22:07">2022-06-21</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a><span> / </span><a class="link-muted" href="/categories/Android/View%E4%BD%93%E7%B3%BB/">View体系</a></span><span class="level-item">33 分钟读完 (大约4906个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/03/31/Android%E7%84%A6%E7%82%B9%E6%9C%BA%E5%88%B6/">Android焦点机制</a></h1><div class="content"><article class="message message-immersive is-primary">
<div class="message-body">
<i class="fas fa-lightbulb mr-2"></i>
本篇所分析的源码为Android 28，可能与其他版本有所出入
</div>
</article>

<h2 id="焦点存储与设置"><a href="#焦点存储与设置" class="headerlink" title="焦点存储与设置"></a>焦点存储与设置</h2><h3 id="焦点的标志位"><a href="#焦点的标志位" class="headerlink" title="焦点的标志位"></a>焦点的标志位</h3><p>在<code>View</code>中，自身的许多状态都是使用<code>mPrivateFlags</code>来记录，其中<code>FOCUSABLE_MASK</code>位为记录<code>View</code>的焦点状态</p>
<figure class="highlight java"><figcaption><span>View.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Mask for use with setFlags indicating bits used for focus.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FOCUSABLE_MASK = <span class="number">0x00000011</span>;</span><br></pre></td></tr></table></figure>
<p><code>View</code>的焦点焦点状态共有3种<code>NOT_FOCUSABLE</code>、<code>FOCUSABLE</code>、<code>FOCUSABLE_AUTO</code>。</p>
<figure class="highlight java"><figcaption><span>View.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This view does not want keystrokes.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NOT_FOCUSABLE = <span class="number">0x00000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This view wants keystrokes.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FOCUSABLE = <span class="number">0x00000001</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This view determines focusability automatically. This is the default.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FOCUSABLE_AUTO = <span class="number">0x00000010</span>;</span><br></pre></td></tr></table></figure>

<p>其中<code>FOCUSABLE_AUTO</code>为默认状态，当未在xml未配置<code>android:focusable</code>属性时，系统会将焦点状态设置为<code>FOCUSABLE_AUTO</code></p></div><a class="article-more button is-small is-size-7" href="/2021/03/31/Android%E7%84%A6%E7%82%B9%E6%9C%BA%E5%88%B6/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-03-30T06:10:56.000Z" title="2021/3/30 下午2:10:56">2021-03-30</time>发表</span><span class="level-item"><time dateTime="2022-06-15T10:06:20.089Z" title="2022/6/15 下午6:06:20">2022-06-15</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a><span> / </span><a class="link-muted" href="/categories/Android/View%E4%BD%93%E7%B3%BB/">View体系</a></span><span class="level-item">4 分钟读完 (大约612个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/03/30/Android%E7%9A%84TouchMode/">Android的TouchMode</a></h1><div class="content"><h2 id="什么是TouchMode"><a href="#什么是TouchMode" class="headerlink" title="什么是TouchMode"></a>什么是TouchMode</h2><p>TouchMode就是”触摸模式“。在一般情况下，Android系统都是处于TouchMode的模式下也就是<code>View.isInTouchMode() == true</code>的状态下。大多Android开发都是开发的手机App应用，所以可能没有接触或使用过TouchMode，而在开发Android TV应用或其他没有触摸屏的应用时会接触到这个TouchMode，但一旦使用遥控器遥控或调用了<code>View.requestFocusFromTouch</code>等可以更改TouchMode的方法后，系统就会退出TouchMode，当用户点击屏幕后，就会进入触屏模式也就是TouchMode模式。</p></div><a class="article-more button is-small is-size-7" href="/2021/03/30/Android%E7%9A%84TouchMode/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-03-26T08:34:08.000Z" title="2021/3/26 下午4:34:08">2021-03-26</time>发表</span><span class="level-item"><time dateTime="2022-06-16T03:27:23.908Z" title="2022/6/16 上午11:27:23">2022-06-16</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Unity/">Unity</a></span><span class="level-item">17 分钟读完 (大约2586个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/03/26/Unity2019%E4%B8%8EAndroid%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/">Unity2019与Android混合开发</a></h1><div class="content"><h2 id="0-开始前的版本对齐"><a href="#0-开始前的版本对齐" class="headerlink" title="0. 开始前的版本对齐"></a>0. 开始前的版本对齐</h2><p>Unity版本：Unity2019.3.4f1<br>AndroidStudio版本：3.5.3</p>
<h2 id="1-Unity-–-准备项目"><a href="#1-Unity-–-准备项目" class="headerlink" title="1. Unity – 准备项目"></a>1. Unity – 准备项目</h2><ol>
<li><p>新建项目</p>
</li>
<li><p>打开File -&gt; Build Setting</p></div><a class="article-more button is-small is-size-7" href="/2021/03/26/Unity2019%E4%B8%8EAndroid%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-03-26T08:31:19.000Z" title="2021/3/26 下午4:31:19">2021-03-26</time>发表</span><span class="level-item"><time dateTime="2022-06-16T03:26:06.224Z" title="2022/6/16 上午11:26:06">2022-06-16</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/JavaWeb/">JavaWeb</a></span><span class="level-item">38 分钟读完 (大约5707个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/03/26/JavaWeb%E7%AC%94%E8%AE%B0/">JavaWeb笔记</a></h1><div class="content"><h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册驱动</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"><span class="comment">//获取数据库连接对象</span></span><br><span class="line">Connection connection = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://59.110.213.97:3306/test?useSSL=false&quot;</span>,</span><br><span class="line">        <span class="string">&quot;root&quot;</span>, <span class="string">&quot;GHn,.155070&quot;</span>);</span><br><span class="line"><span class="comment">//定义sql语句</span></span><br><span class="line">String sql = <span class="string">&quot; insert into table_test(id,number) values(null,10086)&quot;</span>;</span><br><span class="line"><span class="comment">//获取执行sql的对象</span></span><br><span class="line">Statement statement = connection.createStatement();</span><br><span class="line"><span class="comment">//执行sql</span></span><br><span class="line"><span class="keyword">int</span> count = statement.executeUpdate(sql);</span><br><span class="line">System.out.println(count);</span><br><span class="line"><span class="comment">//释放资源</span></span><br><span class="line">statement.close();</span><br><span class="line">connection.close();</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small is-size-7" href="/2021/03/26/JavaWeb%E7%AC%94%E8%AE%B0/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-03-26T08:03:08.000Z" title="2021/3/26 下午4:03:08">2021-03-26</time>发表</span><span class="level-item"><time dateTime="2022-06-16T03:26:17.508Z" title="2022/6/16 上午11:26:17">2022-06-16</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a></span><span class="level-item">19 分钟读完 (大约2852个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/03/26/%E3%80%8AAndroid%E5%BC%80%E5%8F%91%E8%89%BA%E6%9C%AF%E6%8E%A2%E7%B4%A2%E3%80%8B%E7%AC%94%E8%AE%B0/">《Android开发艺术探索》笔记</a></h1><div class="content"><h1 id="第一章-Activty的生命周期和启动模式"><a href="#第一章-Activty的生命周期和启动模式" class="headerlink" title="第一章 Activty的生命周期和启动模式"></a>第一章 Activty的生命周期和启动模式</h1><h2 id="Activity的生命周期全面分析"><a href="#Activity的生命周期全面分析" class="headerlink" title="Activity的生命周期全面分析"></a>Activity的生命周期全面分析</h2><h3 id="典型情况下的生命周期分析"><a href="#典型情况下的生命周期分析" class="headerlink" title="典型情况下的生命周期分析"></a>典型情况下的生命周期分析</h3><p>在正常的情况下，Activity会经历如下生命周期。</p>
<ol>
<li><code>onCreate</code>: <strong>表示Activity正在被创建</strong>,是生命周期的第一个方法</li>
<li><code>onRestart</code>: <strong>表示Activity正在被重新启动</strong>。一般由用户从ActivityA启动ActivityB后，重新返回ActivityA触发。</li>
<li><code>onStart</code>: <strong>表示Activity已经可见，但无法与用户交互</strong>。<em>（没有获取到焦点）</em></li>
<li><code>onResume</code>: <strong>表示activity获得了焦点，用户可以进行操作</strong>。</li>
<li><code>onPause</code>: <strong>Activity正在停止，失去了焦点，不能进行操作</strong>。此时可以做一些存储数据、停止动画等工作，但<strong>不能太耗时，会影响新Activity的显示</strong> <em>（新Activity的onResume会在老Activity的<code>onPause</code>方法后执行）</em></li>
<li><code>onStop</code>: <strong>表示Activity即将停止，对用户来说已经不可见。</strong> 可以在此时做稍重的回收工作，也不能太耗时。<strong>一般的操作尽量在onStop中执行,不要放到onPause中</strong></li>
<li><code>onDestory</code> : <strong>表示activity即将被销毁</strong>,是最后一个回调。可以做回收工作和最终资源的释放。</li>
</ol></div><a class="article-more button is-small is-size-7" href="/2021/03/26/%E3%80%8AAndroid%E5%BC%80%E5%8F%91%E8%89%BA%E6%9C%AF%E6%8E%A2%E7%B4%A2%E3%80%8B%E7%AC%94%E8%AE%B0/#more">阅读更多</a></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://tuchuang-beijing.oss-cn-beijing.aliyuncs.com/35256979.jpeg" alt="Hanani"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Hanani</p><p class="is-size-6 is-block">Android Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Beijing China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">9</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">3</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/kalac2232" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/kalac2232"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/Android/BUG%E6%80%BB%E7%BB%93/"><span class="level-start"><span class="level-item">BUG总结</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Android/Gradle/"><span class="level-start"><span class="level-item">Gradle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Android/View%E4%BD%93%E7%B3%BB/"><span class="level-start"><span class="level-item">View体系</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/JavaWeb/"><span class="level-start"><span class="level-item">JavaWeb</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Unity/"><span class="level-start"><span class="level-item">Unity</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaWeb/"><span class="tag">JavaWeb</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unity/"><span class="tag">Unity</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-22T06:50:40.000Z">2022-06-22</time></p><p class="title"><a href="/2022/06/22/%E7%B2%BE%E5%A6%99%E7%9A%84%E4%BD%8D%E8%BF%90%E7%AE%97/">精妙的位运算</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-15T10:04:56.000Z">2022-06-15</time></p><p class="title"><a href="/2022/06/15/Android%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/">Android屏幕适配知识总结</a></p><p class="categories"><a href="/categories/Android/">Android</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-12T07:15:24.000Z">2022-01-12</time></p><p class="title"><a href="/2022/01/12/gradle%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90(%E4%B8%80)/">Gradle构建流程分析（一）- 初始化与Task创建</a></p><p class="categories"><a href="/categories/Android/">Android</a> / <a href="/categories/Android/Gradle/">Gradle</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-05-07T02:47:19.000Z">2021-05-07</time></p><p class="title"><a href="/2021/05/07/%E8%AE%BE%E7%BD%AE%E5%B1%8F%E5%B9%95%E7%BC%A9%E6%94%BE%E5%90%8E%E7%BC%A9%E6%94%BE%E8%B7%9D%E7%A6%BB%E5%8F%98%E4%B8%BA%E5%8F%8C%E5%80%8D/">设置屏幕缩放后缩放距离变为双倍</a></p><p class="categories"><a href="/categories/Android/">Android</a> / <a href="/categories/Android/BUG%E6%80%BB%E7%BB%93/">BUG总结</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-31T09:20:30.000Z">2021-03-31</time></p><p class="title"><a href="/2021/03/31/Android%E7%84%A6%E7%82%B9%E6%9C%BA%E5%88%B6/">Android焦点机制</a></p><p class="categories"><a href="/categories/Android/">Android</a> / <a href="/categories/Android/View%E4%BD%93%E7%B3%BB/">View体系</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">一月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/logo.png" alt="Hanani&#039;s blog" height="28"></a><p class="is-size-7"><span>&copy; 2022 Hanani</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>